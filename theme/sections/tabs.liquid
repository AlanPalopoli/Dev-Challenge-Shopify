{% schema %}
  {
    "name": "Tabs",
    "settings": [],
    "blocks": [
      {
        "type": "tab",
        "name": "Tab",
        "settings": [
          {
            "id": "tab_title",
            "type": "text",
            "label": "Tab Title",
            "default": "Default tab text"
          }, {
            "id": "tab_content",
            "type": "textarea",
            "label": "Tab Content"
          }, {
            "id": "tab_color",
            "type": "color",
            "label": "Tab Color",
            "default": "#000000"
          }
        ]
      }
    ],
    "presets": []
  }
{% endschema %}
{%- capture block_settings -%}

  {%- for block in section.blocks -%}
    {{ block.settings }}{%- unless forloop.last -%},{%- endunless -%}
  {%- endfor -%}

{%- endcapture -%}
{% assign data = section.blocks | map: "settings" %}
<div
  class="tabs tabs-section"
  data-section-settings="{{ section.settings }}"
  data-section-blocks={{ data | json }}>
  <div class="tabs__container flex gap-2">
    {% for block in section.blocks %}
      <button
        class="border rounded-md p-2"
        onclick="showTabText('tab{{ forloop.index }}')"
        style="background-color: {{ block.settings.tab_color }};">
        {{ block.settings.tab_title }}
      </button>
    {% endfor %}
  </div>

  {% for block in section.blocks %}
    <div id="tab{{ forloop.index }}" class="tab hidden">
      {{ block.settings.tab_content }}
    </div>
  {% endfor %}
</div>
<script>
  function showTabText(tabName) {
    document
      .querySelectorAll('.tab')
      .forEach(tab => {
        tab.style.display = "none";
      })
      document
      .getElementById(tabName)
      .style
      .display = "block"
  }
</script>